<ng-template let-control="control" let-schema="schema" let-model="model" [fluentContextGuard]="contextGuard">
  <ng-container *fluentInject="ControlWrapperDirective as controlWrapper; optional: true">
    @if (controlWrapper) {
      @if (!(schema.hidden | reactive: model : schema : control)) {
        <nz-cascader
          #component
          fluentCol
          nzSpaceCompactItem="select"
          [fluentBinding]="{ component, schema, control, model }"
          [formControl]="control"
          [class]="schema.class"
          [style]="schema.style"
          [span]="schema.col | col: 'span'"
          [flex]="schema.col | col: 'flex'"
          [offset]="schema.col | col: 'offset'"
          [nzAllowClear]="schema.clearable ?? true"
          [nzAutoFocus]="schema.autofocus"
          [nzChangeOnSelect]="schema.changeOnSelect"
          [nzBackdrop]="schema.backdrop!"
          [nzExpandIcon]="schema.expandIcon | template: ''"
          [nzExpandTrigger]="schema.trigger!"
          [nzLabelProperty]="schema.config?.labelProperty ?? 'label'"
          [nzLoadData]="fetchOptions | invoke: model : schema : control"
          [nzOptions]="schema.options! | reactive: model : schema : control"
          [nzPlaceHolder]="(schema.placeholder | reactive: model : schema : control) ?? ''"
          [nzShowArrow]="schema.arrow ?? true"
          [nzShowSearch]="schema.searchable!"
          [nzSize]="schema.size!"
          [nzSuffixIcon]="schema.suffixIcon | template: 'down'"
          [nzValueProperty]="schema.config?.valueProperty ?? 'value'" />
      }
    } @else {
      <nz-cascader
        #component
        nzSpaceCompactItem="select"
        [fluentBinding]="{ component, schema, control, model }"
        [formControl]="control"
        [class]="schema.class"
        [style]="schema.style"
        [nzAllowClear]="schema.clearable ?? true"
        [nzAutoFocus]="schema.autofocus"
        [nzBackdrop]="schema.backdrop!"
        [nzChangeOnSelect]="schema.changeOnSelect"
        [nzExpandIcon]="schema.expandIcon | template: ''"
        [nzExpandTrigger]="schema.trigger!"
        [nzLabelProperty]="schema.config?.labelProperty ?? 'label'"
        [nzLoadData]="fetchOptions | invoke: model : schema : control"
        [nzOptions]="schema.options! | reactive: model : schema : control"
        [nzPlaceHolder]="(schema.placeholder | reactive: model : schema : control) ?? ''"
        [nzShowArrow]="schema.arrow ?? true"
        [nzShowSearch]="schema.searchable!"
        [nzSize]="schema.size!"
        [nzSuffixIcon]="schema.suffixIcon | template: 'down'"
        [nzValueProperty]="schema.config?.valueProperty ?? 'value'" />
    }
  </ng-container>
</ng-template>
